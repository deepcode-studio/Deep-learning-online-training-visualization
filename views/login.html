<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit" />
<meta name="description" content="cas" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<title>CloudCoding</title>
<link rel="stylesheet" type="text/css" href="css/login.css">
<link rel="shortcut icon"
	href="images/favicon.ico" />
<!-- 主样式CSS -->
</head>											<!--图片大小：1920*990-->

<body style="min-width: 1280px; background: url(images/loginbackground.jpg) no-repeat center;background-size: cover;background-attachment: fixed;">
<!-- <body> -->	
<div class="bg">
	<div class="app-logo">
		
			<img src="images/app-logo.png" tppabs="https://yunbianyi/images/app-logo.png"> <br> <!-- 统一身份认证 -->
		
	</div>
	<div class="login">
		<div class="login-box">
			<div class="login-bag">
				<div id="login-type-1">
					<p class="login-bag-title"><!--统一身份认证--></p>
					<form id="form1" name="form1" action="/login" method="post" autocomplete="off"> <!--登录接口-->
						<div id="errorMessage" class="error" style="display: none;">
							<div class="error-massage">
								</div>
						</div>				
						<div class="input-box">
							<label> <input type="text" name="username" id="username"
								placeholder="账号 Username" required value="{{ form && form.username }}"
								class="login-username" autocomplete="off">
								<input type="text" class="login-username" style="display: none;" />
							</label>
							<span class="username"><img src="images/user.png" tppabs="https://yunbianyi/images/user.png"></span>
						</div>
						<div><font color="red">{{ messege1 }}</font></div>
						<div class="input-box">
							<label> <input type="password" name="password"
								id="password" placeholder="密码 Password" required value="{{ form && form.password }}" class="login-password" autocomplete="off">
								<input type="text" class="login-password" style="display: none;" />
							</label>
							<span class="password"><img src="images/lock.png" tppabs="https://yunbianyi/images/lock.png"></span>
						</div>
						<div><font color="red">{{ messege2 }}</font></div>
						<div class="input-box-yzm" id="imageCode" style="display: none;">
							<label>
							    <input id="errors" name="errors" type="hidden" value="0" />  
							    <input id="imageCodeName" name="imageCodeName" type="text" placeholder="验证码 Verification code" class="login-yzm">
							    <input type="text" class="login-yzm" style="display: none;" />
							</label> 
							<span class="yzm"><img src="codeimage.jpg" tppabs="https://yunbianyi/codeimage" onclick="this.src='/cas/codeimage?'+Math.floor(Math.random()*100)"></span>
						</div>
						
						<div style="margin-top:30px;"></div> <!--上下间距30px-->

						<div class="login-submit-box">
							<button type="submit" class="submit_button"
								onclick="return checkInput(this.form);">登 录</button>	
							<div class="clear-1"></div>
							
							<!--
							<a href="javascript:if(confirm('http://authserver.nju.edu.cn/authserver/index.do  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ������·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ�����?'))window.location='http://authserver.nju.edu.cn/authserver/index.do'" tppabs="http://authserver.nju.edu.cn/authserver/index.do" title="User Center">自助服务</a> 
							<a href="javascript:if(confirm('http://authserver.nju.edu.cn/authserver/getBackPasswordMainPage.do  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ������·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ�����?'))window.location='http://authserver.nju.edu.cn/authserver/getBackPasswordMainPage.do'" tppabs="http://authserver.nju.edu.cn/authserver/getBackPasswordMainPage.do" title="Retrieve Password">忘记密码</a> 
							<a href="javascript:if(confirm('http://help.nju.edu.cn/  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ������·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ�����?'))window.location='http://help.nju.edu.cn/'" tppabs="http://help.nju.edu.cn/" title="Help Center">在线帮助</a>
							-->
							
							<!-- 
						</div>
						<div class="clear-1"></div>
						<div class="other_login_type">
							<fieldset class="oth_type_tit">
								<legend align="center" class="oth_type_txt">其他方式登录</legend>
							</fieldset>
							<div class="oth_type_links">
								<a class="icon_type btn_qq" id="qq-web" data-type="qq" href="javascript:void(0);"
									title="QQ登录" ><i></i></a>
								<a id="weixin-web"
									class="icon_type btn_weixin" data-type="weixin" href="javascript:void(0);"
									title="微信登录"><i></i></a>
								 <a
									class="icon_type btn_weibo " data-type="weibo" href="#"
									title="微博登录" target="_blank"><i></i></a>  <a id="weixin-app"
									class="icon_type btn_weixin" data-type="weixin" href="#"
									title="微信登录"><i></i></a>  -->
									
							<!--									
							</div>
						</div>
						<input type="hidden" name="lt" value="_c9A25E978-22DB-D452-156A-21E442F1D088_kF80AE3E9-CC40-C776-6BF2-7ED26317F7C6" />
						<input type="hidden" name="_eventId" value="submit" />
					</form>

				</div>
 					-->
				<!-- <div id="login-type-2" >
					<p class="login-bag-title-tck">微信登录</p>
					<div class="clear-1"></div>
					<div align="center">
						<img src="images/ntdxwx.png">
					</div>
					<div class="ewm-text">请使用微信扫描二维码登录</div>
					<a href="#" id="close-ewm">X</a>
				</div>
				 -->
				<!--报错信息-->
				<div id="login-error-1" class="error-tip-app">
					<p class="login-bag-title">统一身份认证</p>
					<p id="error-note"></p>
					<a href="javascript:void(0);" id="error-back">返回至登录页面<br>（Back to the login page）</a>
				</div>

			</div>
		</div>
	</div>	

<!--	
	<div class="app-mask">
		<div id="login-type-4">
			微信登陆
			<p class="login-bag-title-4">微信登录</p>
			<div class="clear-1"></div>
			<div align="center">
				<img src="images/ntdxwx.png" tppabs="https://yunbianyi/images/ntdxwx.png">
			</div>
			<div class="ewm-text">请使用微信扫描二维码登录</div>
			微信登陆 结束
			<a href="#" id="close-ewm-2">X</a>
		</div>
	</div>
</div>	
-->


<script src="js/jquery-1.11.2.min.js" tppabs="https://yunbianyi/js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/slide.js" tppabs="https://yunbianyi/js/slide.js"></script>
<script type="text/javascript">
if( !('placeholder' in document.createElement('input')) ){
	$('input[placeholder]').each(function(){
		var that = $(this), placeholder= that.attr('placeholder');
		if(that.val()===""){
			that.hide();
			that.next().show().val(placeholder).addClass('login-placeholder');
		}
		
		that.next().focus(function(){
		  if(that.next().val()===placeholder){
		    that.next().hide().val("").removeClass('login-placeholder');
		    that.show().val("").focus();
		  }
		});
		that.blur(function(){
		  if(that.val()===""){
		    that.hide();
		    that.next().show().val(placeholder).addClass('login-placeholder');
		  }
		});
	});
}

function checkInput(form) {
	var username = document.getElementById("username");
	var password = document.getElementById("password");
	if (username.value == "") {
		$("#login-type-1").hide();
		$("#error-note").html("请输入用户名！<br>（Please enter your username !）")
		$("#login-error-1").show();
		return false;
	}
	if (password.value == "") {
		$("#login-type-1").hide();
		$("#error-note").html("请输入密码！<br>（Please enter your password !）")
		$("#login-error-1").show();
		return false;
	}
	
	if (errorTimes == -1 || errors < errorTimes){}
	else {
		imageCodeName = document.getElementById("imageCodeName");
		if (imageCodeName.value=="") {
			$("#login-type-1").hide();
			$("#error-note").html("请输入验证码！<br>（Please enter the verification code !）")
			$("#login-error-1").show();
			return false;
		}
	}
	return true;
}

</script>
<script type="text/javascript">
	(function(window, $, undefined) {
		/*
		 * tab切换插件
		 * 用例：$('*').createTab();
		 */
		$.fn.createTab = function(opt) {
			var def = {
				activeEvt : 'mouseover',
				activeCls : 'cur'
			}
			$.extend(def, opt);
			this.each(function() {
				var $this = $(this);
				var timer;
				$this.find('ul.title li').mouseover(
						def.activeEvt,
						function() {
							var index = $(this).index(), that = $(this);
							timer = setTimeout(function() {
								that.addClass('cur').siblings()
										.removeClass('cur');
								$this.find('login-1'/*tpa=https://yunbianyi/div.list*/).animate({
									marginLeft : -740 * index
								}, 'slow');
							}, 500);
						}).mouseout(function() {
					clearTimeout(timer);
				})
			});
		}

	})(window, jQuery);
	$(function() {
		$(".jyTable").createTab();

		/* $("#weixin-web").click(function() {
			$("#login-type-1").hide();
			$("#login-type-2").show();
		}) */
		$("#close-ewm").click(function() {
			$("#login-type-2").hide();
			$("#login-type-1").show();
		})

		$("#weixin-app").click(function() {

			$(".app-mask").show();
		})
		$("#close-ewm-2").click(function() {
			$(".app-mask").hide();
		})

	})

/* 	//悬浮显示拼图

	var yzm_btn = document.getElementById("yzm-move");
	var yzm_bg = document.getElementById("yzm-panel");

	yzm_btn.onmouseover = function() {
		yzm_bg.style.display = 'block';
	};

	yzm_btn.onmouseout = function() {
		yzm_bg.style.display = 'none';
	};

	//刷新拼图
	var refresh_btn = document.getElementById("refresh-btn");
	var convex_img = document.getElementById("convex")

	refresh_btn.onclick = function() {
		// yzm_bg.style.background = 'url("images/veri-bg3.jpg"/*tpa=https://yunbianyi/images/veri-bg3.jpg*/ 'no-repeat center'
	// 	convex_img.style.background = 'url("images/jigsaw-convex2.png"/*tpa=https://yunbianyi/images/jigsaw-convex2.png*/) no-repeat'
	 // }; */

	$("#error-back").click(function() {
		$(this).parent().hide();
		$("#login-type-1").show();
	})

	function checkError() {
		var messageSpan = $(".error-massage").find("span");
		var errorMsg = "";
		if($(messageSpan).length > 0){
			errorMsg = $(messageSpan).text().trim();
		}else{
			errorMsg = $(".error-massage").html().trim();
		}
		if (errorMsg != "") {
			$("#login-type-1").hide();
			$("#error-note").html(errorMsg);
			$("#login-error-1").show();
		}
	}
	checkError();
	
	var errors = 0;
	var errorTimes = 0;
	function checkImageCodeDisplay() {
		if (errorTimes == -1 || errors < errorTimes) {
			document.getElementById("imageCode").style.display = "none";
		} else {
			document.getElementById("imageCode").style.display = "";
		}
	}

	checkImageCodeDisplay();
	
<!--
	$("#qq-web").click(function(e){
		e.preventDefault();
		
		var client_id = "101440505"; 
		var baseuri ="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id="+client_id+"&redirect_uri=";
		var callbackuri = "https://yunbianyi/qqLogin";
		window.location.href = baseuri+encodeURIComponent(callbackuri);
	});
	
	
	$("#weixin-web").click(function(e){
		e.preventDefault();

		var appid = "wx3ea2f3f757401930";
		var baseuri ="http://open.weixin.qq.com/connect/qrconnect?appid="+appid+"&scope=snsapi_login&state=&redirect_uri=";
		var callbackuri = "https://yunbianyi/wechatLogin";
		window.location.href = baseuri+encodeURIComponent(callbackuri);
	});

</script>
</body>
</html>
